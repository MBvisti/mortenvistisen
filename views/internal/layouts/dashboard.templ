package layouts

import "github.com/mbvisti/mortenvistisen/router/routes"
import "time"
import "fmt"
import "github.com/mbvisti/mortenvistisen/config"

templ Dashboard() {
	<!DOCTYPE html>
	<html lang="en">
		<head>
			<meta charset="UTF-8"/>
			<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
			<title>Dashboard - Grafto</title>
			<link href={ config.Cfg.GetFullDomain() + "/" + routes.CssEntrypoint.Path } rel="stylesheet"/>
			<link rel="icon" type="image/png" sizes="16x16" href={ routes.Favicon16.Path }/>
			<link rel="icon" type="image/png" sizes="32x32" href={ routes.Favicon32.Path }/>
			<script src={ fmt.Sprintf("%v?%v", routes.JsEntrypoint.Path, time.Now().Unix()) } type="module"></script>
		</head>
		<body>
			<!-- Mobile Navigation Toggle -->
			<button class="mobile-nav-toggle" onclick="toggleMobileNav()">â˜°</button>
			<!-- Sidebar Overlay for Mobile -->
			<div class="sidebar-overlay" onclick="closeMobileNav()"></div>
			<div class="dashboard-layout">
				<!-- Sidebar -->
				<aside class="dashboard-sidebar" id="sidebar">
					<div class="sidebar-header">
						<h2 class="sidebar-title">Grafto</h2>
					</div>
					<nav>
						<ul class="sidebar-nav">
							<li class="nav-item">
								<a href="/dashboard" class="nav-link active">
									<span class="nav-icon">ğŸ“Š</span>
									Dashboard
								</a>
							</li>
							<li class="nav-item">
								<a href="/dashboard/articles" class="nav-link">
									<span class="nav-icon">ğŸ“</span>
									Articles
								</a>
							</li>
							<li class="nav-item">
								<a href="/dashboard/analytics" class="nav-link">
									<span class="nav-icon">ğŸ“ˆ</span>
									Analytics
								</a>
							</li>
							<li class="nav-item">
								<a href="/dashboard/settings" class="nav-link">
									<span class="nav-icon">âš™ï¸</span>
									Settings
								</a>
							</li>
						</ul>
					</nav>
				</aside>
				<!-- Main Content -->
				<main class="dashboard-main">
					{ children... }
				</main>
			</div>
			<script>
				function toggleMobileNav() {
					const sidebar = document.getElementById('sidebar');
					const overlay = document.querySelector('.sidebar-overlay');
					
					sidebar.classList.toggle('open');
					overlay.classList.toggle('open');
				}

				function closeMobileNav() {
					const sidebar = document.getElementById('sidebar');
					const overlay = document.querySelector('.sidebar-overlay');
					
					sidebar.classList.remove('open');
					overlay.classList.remove('open');
				}

				// Close sidebar when clicking on nav links on mobile
				document.querySelectorAll('.nav-link').forEach(link => {
					link.addEventListener('click', () => {
						if (window.innerWidth <= 768) {
							closeMobileNav();
						}
					});
				});
			</script>
		</body>
	</html>
}
