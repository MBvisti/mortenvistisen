package layouts

import (
	"github.com/mbvisti/mortenvistisen/router/routes"
	"time"
	"fmt"
	"github.com/mbvisti/mortenvistisen/config"
	"github.com/mbvisti/mortenvistisen/router/contexts"
	"github.com/mbvisti/mortenvistisen/views/internal/components"
)

templ Dashboard() {
	<!DOCTYPE html>
	<html lang="en">
		<head>
			<meta charset="UTF-8"/>
			<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
			<title>Dashboard - MBV</title>
			<link href={ fmt.Sprintf("%s/%v?%v", config.Cfg.GetFullDomain(), routes.CssEntrypoint.Path, time.Now().Unix()) } rel="stylesheet"/>
			<!-- <link rel="icon" type="image/png" sizes="16x16" href={ routes.Favicon16.Path }/> -->
			<!-- <link rel="icon" type="image/png" sizes="32x32" href={ routes.Favicon32.Path }/> -->
			<script src={ fmt.Sprintf("%s/%v?%v", config.Cfg.GetFullDomain(), routes.JsEntrypoint.Path, time.Now().Unix()) } type="module"></script>
		</head>
		<body>
			<!-- Mobile Navigation Toggle -->
			<button class="mobile-nav-toggle" onclick="toggleMobileNav()">â˜°</button>
			<!-- Sidebar Overlay for Mobile -->
			<div class="sidebar-overlay" onclick="closeMobileNav()"></div>
			<div class="dashboard-layout">
				<!-- Sidebar -->
				<aside class="dashboard-sidebar" id="sidebar">
					<div class="sidebar-header">
						<h2 class="sidebar-title">Grafto</h2>
					</div>
					<nav>
						<ul class="sidebar-nav">
							<li class="nav-item">
								<a href={ templ.SafeURL(routes.DashboardHome.Path) } class="nav-link active">
									<span class="nav-icon">ğŸ“Š</span>
									Dashboard
								</a>
							</li>
							<li class="nav-item">
								<a href="/dashboard/tags" class="nav-link">
									<span class="nav-icon">ğŸ·ï¸</span>
									Tags
								</a>
							</li>
						</ul>
					</nav>
				</aside>
				<!-- Main Content -->
				<main class="dashboard-main">
					{ children... }
				</main>
				<div class="toast-container">
					for _, flash := range contexts.ExtractFlashMessages(ctx) {
						@components.ToastMessage(flash)
					}
				</div>
			</div>
			<script type="text/javascript" src={ config.Cfg.GetFullDomain() + "/" + routes.JsNav.Path }>
			</script>
		</body>
	</html>
}

//<li class="nav-item">
//	<a href={ templ.SafeURL(routes.DashboardArticles.Path) } class="nav-link">
//		<span class="nav-icon">ğŸ“</span>
//		Articles
//	</a>
//</li>
//<li class="nav-item">
//	<a href={ templ.SafeURL(routes.DashboardAnalytics.Path) } class="nav-link">
//		<span class="nav-icon">ğŸ“ˆ</span>
//		Analytics
//	</a>
//</li>
//<li class="nav-item">
//	<a href={ templ.SafeURL(routes.DashboardSettings.Path) } class="nav-link">
//		<span class="nav-icon">âš™ï¸</span>
//		Settings
//	</a>
//</li>
//
