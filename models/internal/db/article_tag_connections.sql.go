// Code generated by sqlc. DO NOT EDIT.
// versions:
//   sqlc v1.30.0
// source: article_tag_connections.sql

package db

import (
	"context"

	"github.com/google/uuid"
)

const countArticleTagConnection = `-- name: CountArticleTagConnection :one
select count(*) from article_tag_connections
`

func (q *Queries) CountArticleTagConnection(ctx context.Context, db DBTX) (int64, error) {
	row := db.QueryRow(ctx, countArticleTagConnection)
	var count int64
	err := row.Scan(&count)
	return count, err
}

const deleteArticleTagConnection = `-- name: DeleteArticleTagConnection :exec
delete from article_tag_connections where id=$1
`

func (q *Queries) DeleteArticleTagConnection(ctx context.Context, db DBTX, id uuid.UUID) error {
	_, err := db.Exec(ctx, deleteArticleTagConnection, id)
	return err
}

const deleteArticleTagConnectionsByArticleID = `-- name: DeleteArticleTagConnectionsByArticleID :exec
DELETE FROM article_tag_connections WHERE article_id = $1
`

func (q *Queries) DeleteArticleTagConnectionsByArticleID(ctx context.Context, db DBTX, articleID uuid.UUID) error {
	_, err := db.Exec(ctx, deleteArticleTagConnectionsByArticleID, articleID)
	return err
}

const insertArticleTagConnection = `-- name: InsertArticleTagConnection :one
insert into
    article_tag_connections (id, article_id, tag_id)
values
    ($1, $2, $3)
returning id, article_id, tag_id
`

type InsertArticleTagConnectionParams struct {
	ID        uuid.UUID
	ArticleID uuid.UUID
	TagID     uuid.UUID
}

func (q *Queries) InsertArticleTagConnection(ctx context.Context, db DBTX, arg InsertArticleTagConnectionParams) (ArticleTagConnection, error) {
	row := db.QueryRow(ctx, insertArticleTagConnection, arg.ID, arg.ArticleID, arg.TagID)
	var i ArticleTagConnection
	err := row.Scan(&i.ID, &i.ArticleID, &i.TagID)
	return i, err
}

const queryArticleTagConnection = `-- name: QueryArticleTagConnection :many
select id, article_id, tag_id from article_tag_connections
`

func (q *Queries) QueryArticleTagConnection(ctx context.Context, db DBTX) ([]ArticleTagConnection, error) {
	rows, err := db.Query(ctx, queryArticleTagConnection)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	var items []ArticleTagConnection
	for rows.Next() {
		var i ArticleTagConnection
		if err := rows.Scan(&i.ID, &i.ArticleID, &i.TagID); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const queryArticleTagConnectionByID = `-- name: QueryArticleTagConnectionByID :one
select id, article_id, tag_id from article_tag_connections where id=$1
`

func (q *Queries) QueryArticleTagConnectionByID(ctx context.Context, db DBTX, id uuid.UUID) (ArticleTagConnection, error) {
	row := db.QueryRow(ctx, queryArticleTagConnectionByID, id)
	var i ArticleTagConnection
	err := row.Scan(&i.ID, &i.ArticleID, &i.TagID)
	return i, err
}

const queryTagsByArticleID = `-- name: QueryTagsByArticleID :many
select t.id, t.created_at, t.updated_at, t.title
from tags t
inner join article_tag_connections atc on t.id = atc.tag_id
where atc.article_id = $1
`

func (q *Queries) QueryTagsByArticleID(ctx context.Context, db DBTX, articleID uuid.UUID) ([]Tag, error) {
	rows, err := db.Query(ctx, queryTagsByArticleID, articleID)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	var items []Tag
	for rows.Next() {
		var i Tag
		if err := rows.Scan(
			&i.ID,
			&i.CreatedAt,
			&i.UpdatedAt,
			&i.Title,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const updateArticleTagConnection = `-- name: UpdateArticleTagConnection :one
update article_tag_connections
    set article_id=$2, tag_id=$3
where id = $1
returning id, article_id, tag_id
`

type UpdateArticleTagConnectionParams struct {
	ID        uuid.UUID
	ArticleID uuid.UUID
	TagID     uuid.UUID
}

func (q *Queries) UpdateArticleTagConnection(ctx context.Context, db DBTX, arg UpdateArticleTagConnectionParams) (ArticleTagConnection, error) {
	row := db.QueryRow(ctx, updateArticleTagConnection, arg.ID, arg.ArticleID, arg.TagID)
	var i ArticleTagConnection
	err := row.Scan(&i.ID, &i.ArticleID, &i.TagID)
	return i, err
}

const upsertArticleTagConnection = `-- name: UpsertArticleTagConnection :one
insert into
    article_tag_connections (id, article_id, tag_id)
values
    ($1, $2, $3)
on conflict (id) do update set article_id=excluded.article_id, tag_id=excluded.tag_id
returning id, article_id, tag_id
`

type UpsertArticleTagConnectionParams struct {
	ID        uuid.UUID
	ArticleID uuid.UUID
	TagID     uuid.UUID
}

func (q *Queries) UpsertArticleTagConnection(ctx context.Context, db DBTX, arg UpsertArticleTagConnectionParams) (ArticleTagConnection, error) {
	row := db.QueryRow(ctx, upsertArticleTagConnection, arg.ID, arg.ArticleID, arg.TagID)
	var i ArticleTagConnection
	err := row.Scan(&i.ID, &i.ArticleID, &i.TagID)
	return i, err
}
