// Code generated by sqlc. DO NOT EDIT.
// versions:
//   sqlc v1.28.0
// source: article_tags.sql

package db

import (
	"context"

	"github.com/google/uuid"
	"github.com/jackc/pgx/v5/pgtype"
)

const countArticleTags = `-- name: CountArticleTags :one
select count(*) from article_tags
`

func (q *Queries) CountArticleTags(ctx context.Context, db DBTX) (int64, error) {
	row := db.QueryRow(ctx, countArticleTags)
	var count int64
	err := row.Scan(&count)
	return count, err
}

const deleteArticleTag = `-- name: DeleteArticleTag :exec
delete from article_tags where id=$1
`

func (q *Queries) DeleteArticleTag(ctx context.Context, db DBTX, id uuid.UUID) error {
	_, err := db.Exec(ctx, deleteArticleTag, id)
	return err
}

const insertArticleTag = `-- name: InsertArticleTag :one
insert into article_tags (id, created_at, updated_at, title)
values ($1, $2, $3, $4)
returning id, created_at, updated_at, title
`

type InsertArticleTagParams struct {
	ID        uuid.UUID
	CreatedAt pgtype.Timestamptz
	UpdatedAt pgtype.Timestamptz
	Title     string
}

func (q *Queries) InsertArticleTag(ctx context.Context, db DBTX, arg InsertArticleTagParams) (ArticleTag, error) {
	row := db.QueryRow(ctx, insertArticleTag,
		arg.ID,
		arg.CreatedAt,
		arg.UpdatedAt,
		arg.Title,
	)
	var i ArticleTag
	err := row.Scan(
		&i.ID,
		&i.CreatedAt,
		&i.UpdatedAt,
		&i.Title,
	)
	return i, err
}

const queryArticleTagByID = `-- name: QueryArticleTagByID :one
select id, created_at, updated_at, title from article_tags where id=$1
`

func (q *Queries) QueryArticleTagByID(ctx context.Context, db DBTX, id uuid.UUID) (ArticleTag, error) {
	row := db.QueryRow(ctx, queryArticleTagByID, id)
	var i ArticleTag
	err := row.Scan(
		&i.ID,
		&i.CreatedAt,
		&i.UpdatedAt,
		&i.Title,
	)
	return i, err
}

const queryArticleTagByTitle = `-- name: QueryArticleTagByTitle :one
select id, created_at, updated_at, title from article_tags where title=$1
`

func (q *Queries) QueryArticleTagByTitle(ctx context.Context, db DBTX, title string) (ArticleTag, error) {
	row := db.QueryRow(ctx, queryArticleTagByTitle, title)
	var i ArticleTag
	err := row.Scan(
		&i.ID,
		&i.CreatedAt,
		&i.UpdatedAt,
		&i.Title,
	)
	return i, err
}

const queryArticleTags = `-- name: QueryArticleTags :many
select id, created_at, updated_at, title from article_tags order by title asc
`

func (q *Queries) QueryArticleTags(ctx context.Context, db DBTX) ([]ArticleTag, error) {
	rows, err := db.Query(ctx, queryArticleTags)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	var items []ArticleTag
	for rows.Next() {
		var i ArticleTag
		if err := rows.Scan(
			&i.ID,
			&i.CreatedAt,
			&i.UpdatedAt,
			&i.Title,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const queryArticleTagsByArticleID = `-- name: QueryArticleTagsByArticleID :many
select at.id, at.created_at, at.updated_at, at.title from article_tags at
join article_tag_connections atc on at.id = atc.tag_id
where atc.article_id = $1
order by at.title asc
`

func (q *Queries) QueryArticleTagsByArticleID(ctx context.Context, db DBTX, articleID uuid.UUID) ([]ArticleTag, error) {
	rows, err := db.Query(ctx, queryArticleTagsByArticleID, articleID)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	var items []ArticleTag
	for rows.Next() {
		var i ArticleTag
		if err := rows.Scan(
			&i.ID,
			&i.CreatedAt,
			&i.UpdatedAt,
			&i.Title,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const updateArticleTag = `-- name: UpdateArticleTag :one
update article_tags
    set updated_at=$2, title=$3
where id = $1
returning id, created_at, updated_at, title
`

type UpdateArticleTagParams struct {
	ID        uuid.UUID
	UpdatedAt pgtype.Timestamptz
	Title     string
}

func (q *Queries) UpdateArticleTag(ctx context.Context, db DBTX, arg UpdateArticleTagParams) (ArticleTag, error) {
	row := db.QueryRow(ctx, updateArticleTag, arg.ID, arg.UpdatedAt, arg.Title)
	var i ArticleTag
	err := row.Scan(
		&i.ID,
		&i.CreatedAt,
		&i.UpdatedAt,
		&i.Title,
	)
	return i, err
}
